import telebot

# --- 1. ุงูุฅุนุฏุงุฏุงุช ุงููุฏููุฉ (ุชุนุฏููุง ุจููุณู) ---
API_TOKEN = '7611986423:AAH_Ff6u6p7h9X4C9_wN3_qZ-mK4eR_xY'
BALANCE = 1200  # ุฑุตูุฏู ุงููุฏูู
RISK_PER_TRADE = 0.01  # ูุณุจุฉ ุงููุฎุงุทุฑุฉ 1%

bot = telebot.TeleBot(API_TOKEN)

# --- 2. ุฏุงูุฉ ุฏุฑุงุณุฉ ุงูุณูู ูุญุณุงุจ ุงูุชูููู ---
def get_market_analysis():
    """
    ููุง ูููู ุงูุจูุช ุจูุฑุงุฌุนุฉ ุงููุคุดุฑุงุช:
    1. RSI (ูุคุดุฑ ุงูููุฉ)
    2. Trend (ุงูุงุชุฌุงู ุงูุนุงู)
    3. Volatility (ุงูุชุฐุจุฐุจ)
    """
    # ููู ุงูุชุฑุงุถูุฉ ููุซุงู ููููุทู (ูููู ุฑุจุทูุง ุจู API ูุงุญูุงู)
    rsi_value = 52 
    trend_direction = "Up" # ุตุงุนุฏ
    is_volatile = False    # ุงูุณูู ูุณุชูุฑ
    
    rating = 0
    # ุญุณุงุจ ุงูููุงุท (ุงูุชูููู ูู 100)
    if 40 <= rsi_value <= 60: rating += 40  # 40 ููุทุฉ ูู RSI ูุซุงูู
    if trend_direction == "Up": rating += 30 # 30 ููุทุฉ ูู ุงูุงุชุฌุงู ูุงุถุญ
    if not is_volatile: rating += 30         # 30 ููุทุฉ ูู ูุง ููุฌุฏ ุชุฐุจุฐุจ ุฎุทุฑ
    
    return rating, rsi_value, trend_direction

# --- 3. ูุนุงูุฌุฉ ุงูุฃูุงูุฑ ูุฅุฑุณุงู ุงูุชูุจููุงุช ---
@bot.message_handler(commands=['trade', 'start'])
def handle_trade(message):
    # ุงูููุงู ุจู "ุงููุฑุงุฌุนุฉ ุงูุณุฑูุนุฉ" (Quick Review)
    rating, rsi, trend = get_market_analysis()
    
    # ุชูููุฐ ุดุฑุทู: ูู ุงูุชูููู ุฃูู ูู 80 ูุฑูุถ
    if rating < 80:
        bot.reply_to(message, "โ๏ธ **time not appropriate**\n(ุงูุชูููู ุงูุญุงูู: {}/100)".format(rating))
        return

    # ุญุณุงุจ ุญุฌู ุงูููุช (Lot Size) ูุฏููุงู ุจูุงุกู ุนูู ุฑุตูุฏู
    # ุงููุนุงุฏูุฉ: (ุงูุฑุตูุฏ * ุงููุฎุงุทุฑุฉ) / ุนุฏุฏ ููุงุท ุงูููู (ูุซุงู: 50 ููุทุฉ)
    lot_size = (BALANCE * RISK_PER_TRADE) / 100 
    if lot_size < 0.01: lot_size = 0.01 # ุฃูู ููุช ูุณููุญ

    # ุชุญุฏูุฏ ููุน ุงูุตููุฉ (ุดุฑุงุก ุฃู ุจูุน)
    signal_type = "ุดุฑุงุก (BUY) ๐ข" if trend == "Up" else "ุจูุน (SELL) ๐ด"

    # ุดูู ุงูุชูุจูู ุงูููุงุฆู
    alert_text = (
        f"๐ **ุฅุดุงุฑุฉ ุชุฏุงูู ูุคูุฏุฉ**\n"
        f"โโโโโโโโโโโโโโโ\n"
        f"๐ ุงูููุน: {signal_type}\n"
        f"โญ ุงูุชูููู ุงูููุงุฆู: {rating}/100\n"
        f"๐ ุชุญููู ุงููุคุดุฑุงุช: RSI: {rsi} | Trend: {trend}\n"
        f"โโโโโโโโโโโโโโโ\n"
        f"๐ฐ **ุฅุฏุงุฑุฉ ุงููุฎุงุทุฑ (ุฑุตูุฏ {BALANCE}$):**\n"
        f"๐น ุงูููุช ุงูููุชุฑุญ: {lot_size:.2f}\n"
        f"๐น ุงูุญุงูุฉ: โ ุธุฑูู ุงูุณูู ููุงุฆูุฉ\n"
        f"โโโโโโโโโโโโโโโ\n"
        f"๐ *ูุฑุฌู ุงูุชุญูู ูู ุงูููุตุฉ ูุจู ุงูุฏุฎูู*"
    )
    
    bot.send_message(message.chat.id, alert_text, parse_mode="Markdown")

# ุชุดุบูู ุงูุจูุช
print("Gold Bot is Online...")
bot.infinity_polling()
